[gd_scene load_steps=83 format=3 uid="uid://dowrjcdnnxods"]

[ext_resource type="Script" path="res://scripts/sad_man.gd" id="1_wtxo7"]
[ext_resource type="Script" path="res://scripts/state_machine/Idle.gd" id="3_kjit3"]
[ext_resource type="Script" path="res://scripts/state_machine/StateMachine.gd" id="3_q2x24"]
[ext_resource type="Texture2D" uid="uid://dobiitb2g74vc" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00000.png" id="3_to2qc"]
[ext_resource type="Texture2D" uid="uid://csxdmnbqetjio" path="res://art/laughing.png" id="3_wtfk3"]
[ext_resource type="Texture2D" uid="uid://bxk4lvx4k537f" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00001.png" id="4_vo87y"]
[ext_resource type="Texture2D" uid="uid://cilqquv58h6wr" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00002.png" id="5_fyjim"]
[ext_resource type="Script" path="res://scripts/state_machine/Following.gd" id="5_o78q0"]
[ext_resource type="Texture2D" uid="uid://bgrot2rw17dlr" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00003.png" id="6_j5amy"]
[ext_resource type="Script" path="res://scripts/state_machine/Laughing.gd" id="7_btwq4"]
[ext_resource type="Texture2D" uid="uid://blk6tgc4sj8to" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00004.png" id="7_tutmj"]
[ext_resource type="Texture2D" uid="uid://byp3hk15ge37l" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00005.png" id="8_4fri4"]
[ext_resource type="AudioStream" uid="uid://c3q0mleruo2wg" path="res://audio/Objects/Laugh/A_Crowd_Laugh_01.wav" id="8_m2jpo"]
[ext_resource type="Texture2D" uid="uid://quwekyglr070" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00006.png" id="9_rwnak"]
[ext_resource type="AudioStream" uid="uid://ltk3o5i7i347" path="res://audio/Objects/Laugh/A_Crowd_Laugh_02.wav" id="9_v0tvv"]
[ext_resource type="AudioStream" uid="uid://bhcutxbf3gb04" path="res://audio/Objects/Laugh/A_Crowd_Laugh_03.wav" id="10_5olv7"]
[ext_resource type="Texture2D" uid="uid://ddqw7s5p4h0i7" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00007.png" id="10_w3roh"]
[ext_resource type="AudioStream" uid="uid://52akspnbh31w" path="res://audio/Objects/Laugh/A_Crowd_Laugh_04.wav" id="11_q5hps"]
[ext_resource type="Texture2D" uid="uid://bomnyo72r4l05" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00008.png" id="11_w1tps"]
[ext_resource type="Texture2D" uid="uid://b5snlyictrx7c" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00009.png" id="12_7tdjg"]
[ext_resource type="AudioStream" uid="uid://4howgexykh8x" path="res://audio/Objects/Laugh/A_Crowd_Laugh_05.wav" id="12_ne6cm"]
[ext_resource type="Texture2D" uid="uid://gsbatqx5ye16" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00010.png" id="13_6tbhb"]
[ext_resource type="Texture2D" uid="uid://vx47y2t0670o" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00011.png" id="14_8ixtp"]
[ext_resource type="Texture2D" uid="uid://bbt677pxovjhp" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00012.png" id="15_phm2i"]
[ext_resource type="Texture2D" uid="uid://ccwhv880netsv" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00013.png" id="16_t5ntl"]
[ext_resource type="Texture2D" uid="uid://k3s0erx0pry4" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00014.png" id="17_pqm77"]
[ext_resource type="Texture2D" uid="uid://wjbgakdgp1h2" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00015.png" id="18_m80wi"]
[ext_resource type="Texture2D" uid="uid://qfatuv1iw26w" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00016.png" id="19_nry3y"]
[ext_resource type="Texture2D" uid="uid://bnvhtrb4cj7ra" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00017.png" id="20_wne2j"]
[ext_resource type="Texture2D" uid="uid://gfkrgosq3cv3" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00018.png" id="21_odiwy"]
[ext_resource type="Texture2D" uid="uid://cga0su42atqe6" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00019.png" id="22_rqmfe"]
[ext_resource type="Texture2D" uid="uid://8dgdiwsab7lr" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00020.png" id="23_hb6h0"]
[ext_resource type="Texture2D" uid="uid://o0p3b84ks0o" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00021.png" id="24_iouw1"]
[ext_resource type="Texture2D" uid="uid://eiv21ivswger" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00022.png" id="25_knh7q"]
[ext_resource type="Texture2D" uid="uid://bwdimdjdrroap" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00023.png" id="26_w1hks"]
[ext_resource type="Texture2D" uid="uid://bi7lqsd62ymjk" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00024.png" id="27_qne70"]
[ext_resource type="Texture2D" uid="uid://bbnmr1vj0dq68" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00025.png" id="28_0jy7u"]
[ext_resource type="Texture2D" uid="uid://cmgp7csva5xqo" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00026.png" id="29_ycvqy"]
[ext_resource type="Texture2D" uid="uid://bnpiiknbcud8t" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00027.png" id="30_fybns"]
[ext_resource type="Texture2D" uid="uid://btb8vjyupfowm" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00028.png" id="31_yqfdl"]
[ext_resource type="Texture2D" uid="uid://b42k71vpqjxie" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00029.png" id="32_33xx4"]
[ext_resource type="Texture2D" uid="uid://8jmjuqa8lfqj" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00030.png" id="33_w4edm"]
[ext_resource type="Texture2D" uid="uid://dr6ariarmymjw" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00031.png" id="34_dj5cb"]
[ext_resource type="Texture2D" uid="uid://g8ijf6r2kce0" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00032.png" id="35_dr7ij"]
[ext_resource type="Texture2D" uid="uid://cprsvopc80s8i" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00033.png" id="36_1j15e"]
[ext_resource type="Texture2D" uid="uid://njk5cqau2wi8" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00034.png" id="37_te1ka"]
[ext_resource type="Texture2D" uid="uid://dy3n5e8l1xyfj" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00035.png" id="38_vjhmg"]
[ext_resource type="Texture2D" uid="uid://cax563yx5fhx2" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00036.png" id="39_b2dcw"]
[ext_resource type="Texture2D" uid="uid://c15inanbrqwow" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00037.png" id="40_ww6gb"]
[ext_resource type="Texture2D" uid="uid://d4iudh48si11b" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00038.png" id="41_76si4"]
[ext_resource type="Texture2D" uid="uid://dg3ro7ydtrb3i" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00039.png" id="42_2mbpo"]
[ext_resource type="Texture2D" uid="uid://dbokrv2amfrc3" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00040.png" id="43_xf716"]
[ext_resource type="Texture2D" uid="uid://du77rrsvpwlok" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00041.png" id="44_tf5w7"]
[ext_resource type="Texture2D" uid="uid://cbh7d6h64poys" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00042.png" id="45_4padi"]
[ext_resource type="Texture2D" uid="uid://bkxg6fsymp3s6" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00043.png" id="46_gasqr"]
[ext_resource type="Texture2D" uid="uid://b733m6ftchuv5" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00044.png" id="47_0toba"]
[ext_resource type="Texture2D" uid="uid://c1l3k4d237k5n" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00045.png" id="48_bn2jv"]
[ext_resource type="Texture2D" uid="uid://nigexso4g8t3" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00046.png" id="49_cdeau"]
[ext_resource type="Texture2D" uid="uid://byitx6rxpjsea" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00047.png" id="50_7jhnt"]
[ext_resource type="Texture2D" uid="uid://4fc2vftchp8s" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00048.png" id="51_ijhah"]
[ext_resource type="Texture2D" uid="uid://b64u8mwi8jhfp" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00049.png" id="52_gg8dw"]
[ext_resource type="Texture2D" uid="uid://rmxckoj3klcx" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00050.png" id="53_v4k88"]
[ext_resource type="Texture2D" uid="uid://bk1syykm1p0no" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00051.png" id="54_xd1q3"]
[ext_resource type="Texture2D" uid="uid://bhapvow3u3438" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00052.png" id="55_bbt75"]
[ext_resource type="Texture2D" uid="uid://xg2dnwnro22f" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00053.png" id="56_t03os"]
[ext_resource type="Texture2D" uid="uid://dra657pfxw6bk" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00054.png" id="57_iuajp"]
[ext_resource type="Texture2D" uid="uid://byf53yhcqcvoq" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00055.png" id="58_n8rld"]
[ext_resource type="Texture2D" uid="uid://d0wy2qimivpj5" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00056.png" id="59_15yr7"]
[ext_resource type="Texture2D" uid="uid://378lgwi1ehn" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00057.png" id="60_1canv"]
[ext_resource type="Texture2D" uid="uid://t2g36pnw56ro" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00058.png" id="61_j6a3t"]
[ext_resource type="Texture2D" uid="uid://cn7a87ftwosx8" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00059.png" id="62_kvjm6"]
[ext_resource type="Texture2D" uid="uid://bvd5ekt5waamu" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00060.png" id="63_4ripd"]
[ext_resource type="Texture2D" uid="uid://b1im2lkjqexey" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00061.png" id="64_j6ae7"]
[ext_resource type="Texture2D" uid="uid://blnbpovjrq13x" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00062.png" id="65_2kjwu"]
[ext_resource type="Texture2D" uid="uid://d1kesl405ykso" path="res://art/CharacterAnimation/SadCoffee/Kawiarz_walk_frame_00063.png" id="66_2135m"]

[sub_resource type="AtlasTexture" id="AtlasTexture_mqhde"]
atlas = ExtResource("3_wtfk3")
region = Rect2(0, 0, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_dp2ub"]
atlas = ExtResource("3_wtfk3")
region = Rect2(100, 0, 100, 100)

[sub_resource type="SpriteFrames" id="SpriteFrames_wtm5c"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("3_to2qc")
}, {
"duration": 1.0,
"texture": ExtResource("4_vo87y")
}, {
"duration": 1.0,
"texture": ExtResource("5_fyjim")
}, {
"duration": 1.0,
"texture": ExtResource("6_j5amy")
}, {
"duration": 1.0,
"texture": ExtResource("7_tutmj")
}, {
"duration": 1.0,
"texture": ExtResource("8_4fri4")
}, {
"duration": 1.0,
"texture": ExtResource("9_rwnak")
}, {
"duration": 1.0,
"texture": ExtResource("10_w3roh")
}, {
"duration": 1.0,
"texture": ExtResource("11_w1tps")
}, {
"duration": 1.0,
"texture": ExtResource("12_7tdjg")
}, {
"duration": 1.0,
"texture": ExtResource("13_6tbhb")
}, {
"duration": 1.0,
"texture": ExtResource("14_8ixtp")
}, {
"duration": 1.0,
"texture": ExtResource("15_phm2i")
}, {
"duration": 1.0,
"texture": ExtResource("16_t5ntl")
}, {
"duration": 1.0,
"texture": ExtResource("17_pqm77")
}, {
"duration": 1.0,
"texture": ExtResource("18_m80wi")
}, {
"duration": 1.0,
"texture": ExtResource("19_nry3y")
}, {
"duration": 1.0,
"texture": ExtResource("20_wne2j")
}, {
"duration": 1.0,
"texture": ExtResource("21_odiwy")
}, {
"duration": 1.0,
"texture": ExtResource("22_rqmfe")
}, {
"duration": 1.0,
"texture": ExtResource("23_hb6h0")
}, {
"duration": 1.0,
"texture": ExtResource("24_iouw1")
}, {
"duration": 1.0,
"texture": ExtResource("25_knh7q")
}, {
"duration": 1.0,
"texture": ExtResource("26_w1hks")
}, {
"duration": 1.0,
"texture": ExtResource("27_qne70")
}, {
"duration": 1.0,
"texture": ExtResource("28_0jy7u")
}, {
"duration": 1.0,
"texture": ExtResource("29_ycvqy")
}, {
"duration": 1.0,
"texture": ExtResource("30_fybns")
}, {
"duration": 1.0,
"texture": ExtResource("31_yqfdl")
}, {
"duration": 1.0,
"texture": ExtResource("32_33xx4")
}, {
"duration": 1.0,
"texture": ExtResource("33_w4edm")
}, {
"duration": 1.0,
"texture": ExtResource("34_dj5cb")
}, {
"duration": 1.0,
"texture": ExtResource("35_dr7ij")
}, {
"duration": 1.0,
"texture": ExtResource("36_1j15e")
}, {
"duration": 1.0,
"texture": ExtResource("37_te1ka")
}, {
"duration": 1.0,
"texture": ExtResource("38_vjhmg")
}, {
"duration": 1.0,
"texture": ExtResource("39_b2dcw")
}, {
"duration": 1.0,
"texture": ExtResource("40_ww6gb")
}, {
"duration": 1.0,
"texture": ExtResource("41_76si4")
}, {
"duration": 1.0,
"texture": ExtResource("42_2mbpo")
}, {
"duration": 1.0,
"texture": ExtResource("43_xf716")
}, {
"duration": 1.0,
"texture": ExtResource("44_tf5w7")
}, {
"duration": 1.0,
"texture": ExtResource("45_4padi")
}, {
"duration": 1.0,
"texture": ExtResource("46_gasqr")
}, {
"duration": 1.0,
"texture": ExtResource("47_0toba")
}, {
"duration": 1.0,
"texture": ExtResource("48_bn2jv")
}, {
"duration": 1.0,
"texture": ExtResource("49_cdeau")
}, {
"duration": 1.0,
"texture": ExtResource("50_7jhnt")
}, {
"duration": 1.0,
"texture": ExtResource("51_ijhah")
}, {
"duration": 1.0,
"texture": ExtResource("52_gg8dw")
}, {
"duration": 1.0,
"texture": ExtResource("53_v4k88")
}, {
"duration": 1.0,
"texture": ExtResource("54_xd1q3")
}, {
"duration": 1.0,
"texture": ExtResource("55_bbt75")
}, {
"duration": 1.0,
"texture": ExtResource("56_t03os")
}, {
"duration": 1.0,
"texture": ExtResource("57_iuajp")
}, {
"duration": 1.0,
"texture": ExtResource("58_n8rld")
}, {
"duration": 1.0,
"texture": ExtResource("59_15yr7")
}, {
"duration": 1.0,
"texture": ExtResource("60_1canv")
}, {
"duration": 1.0,
"texture": ExtResource("61_j6a3t")
}, {
"duration": 1.0,
"texture": ExtResource("62_kvjm6")
}, {
"duration": 1.0,
"texture": ExtResource("63_4ripd")
}, {
"duration": 1.0,
"texture": ExtResource("64_j6ae7")
}, {
"duration": 1.0,
"texture": ExtResource("65_2kjwu")
}, {
"duration": 1.0,
"texture": ExtResource("66_2135m")
}],
"loop": true,
"name": &"default",
"speed": 24.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_mqhde")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dp2ub")
}],
"loop": true,
"name": &"laughing",
"speed": 5.0
}]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_q607b"]
radius = 13.0
height = 68.0

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_niccl"]
bg_color = Color(0.341176, 0.341176, 0.341176, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_rtoln"]
bg_color = Color(1, 1, 0, 1)

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_4pejl"]
streams_count = 5
stream_0/stream = ExtResource("8_m2jpo")
stream_0/weight = 1.0
stream_1/stream = ExtResource("9_v0tvv")
stream_1/weight = 1.0
stream_2/stream = ExtResource("10_5olv7")
stream_2/weight = 1.0
stream_3/stream = ExtResource("11_q5hps")
stream_3/weight = 1.0
stream_4/stream = ExtResource("12_ne6cm")
stream_4/weight = 1.0

[node name="Sad man" type="CharacterBody2D" groups=["Cakeables", "Sadman"]]
script = ExtResource("1_wtxo7")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
position = Vector2(2.5, -1.5)
scale = Vector2(0.1, 0.1)
sprite_frames = SubResource("SpriteFrames_wtm5c")
frame_progress = 0.485565

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("starting_state")]
script = ExtResource("3_q2x24")
starting_state = NodePath("Idle")

[node name="Idle" type="Node" parent="StateMachine"]
script = ExtResource("3_kjit3")
animation_name = "default"

[node name="IdleTimer" type="Timer" parent="StateMachine/Idle"]
one_shot = true
autostart = true

[node name="Following" type="Node" parent="StateMachine"]
script = ExtResource("5_o78q0")
animation_name = "default"

[node name="Laughing" type="Node" parent="StateMachine" node_paths=PackedStringArray("next_state")]
script = ExtResource("7_btwq4")
next_state = NodePath("../Idle")
animation_name = "laughing"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CapsuleShape2D_q607b")

[node name="HappinessBar" type="ProgressBar" parent="."]
offset_left = -28.0
offset_top = -40.0
offset_right = 27.0
offset_bottom = -36.0
theme_override_styles/background = SubResource("StyleBoxFlat_niccl")
theme_override_styles/fill = SubResource("StyleBoxFlat_rtoln")
value = 60.0
show_percentage = false

[node name="HitboxArea" type="Area2D" parent="."]

[node name="HitboxAreaCollision" type="CollisionShape2D" parent="HitboxArea"]
shape = SubResource("CapsuleShape2D_q607b")

[node name="HappyDepleteTimer" type="Timer" parent="."]
wait_time = 8.0
one_shot = true

[node name="GotCakedTimer" type="Timer" parent="."]
one_shot = true

[node name="LaughingPlayer" type="AudioStreamPlayer2D" parent="."]
stream = SubResource("AudioStreamRandomizer_4pejl")

[connection signal="timeout" from="StateMachine/Idle/IdleTimer" to="StateMachine/Idle" method="_on_idle_timer_timeout"]
[connection signal="area_entered" from="HitboxArea" to="." method="_on_hitbox_area_area_entered"]
[connection signal="area_exited" from="HitboxArea" to="." method="_on_hitbox_area_area_exited"]
[connection signal="timeout" from="HappyDepleteTimer" to="." method="_on_happy_deplete_timer_timeout"]
